<app-panel-outlined>
    <div class="flex p-1" *ngIf="!expanded()" (click)="showExpanded(true)">
        <div class="w-1/3">
            <p class="text-base font-medium dots">{{from}}</p>
            <p class="text-xs font-medium">Shipper</p>
        </div>
        <div class="w-2/3 flex items-top justify-between">
            <div class="" style="width: calc(100% - 64px);">
                <p class="text-sm dots"><span class="font-medium">Email Subject:</span> Lorem ipsum dolor sit amet consectetur. At vitae ultrices commodo tortor vitae. Rhoncus arcu tristique luctus integer maecenas tortor at tortor. </p>
                <span class="text-xs font-medium">Sent 9:00AM</span> <span class="text-xs"> 11/15/2023</span>
            </div>
            <button mat-fab style="background-color: transparent; width: 40px; height: 24px; box-shadow: none;" >
                <img src="/assets/new-ui-icons/Reply.svg">
            </button>
        </div>

    </div>

    <div class="flex flex-col p-1 pt-0" *ngIf="expanded()" (click)="showExpanded(false)">
        <div class="flex items-center gap-1">
            <p class="text-base font-medium dots">shippercontact@shipper.com</p>
            <p class="text-xs pb-1">Shipper</p>
            <div class="flex-1"></div>
            <outlined-button (click)="reply($event)" [toggleable]="false" color="primary" *ngIf="!isReplying()" (click)="isReplying.set(true)">
                <div class="flex items-center gap-2">
                    <img src="/assets/new-ui-icons/ReplyGreen.svg">
                    <div>Reply</div>
                </div>
            </outlined-button>
            <link-button (click)="reply($event)" (click)="isReplying.set(false)" *ngIf="isReplying()">
                <div class="flex items-center gap-2">
                    <img src="/assets/new-ui-icons/Reply.svg">
                </div>
            </link-button>
        </div>


        <div *ngIf="isReplying()" class="px-8 w-4/5 pb-4">
            
            <div class="text-2xl py-2">Email Subject</div>

            <app-text-editor></app-text-editor>

            <div class="flex items-center mt-2">
                <link-button (click)="reply($event)" (click)="isReplying.set(false)">
                    <div class="flex items-center gap-2">
                        <img src="/assets/new-ui-icons/ReplyGreen.svg">
                        <div>Reply</div>
                    </div>
                </link-button>
                <div class="flex-1"></div>
                <link-button (click)="reply($event)" (click)="isReplying.set(false)">Cancel</link-button>
                <outlined-button  (click)="reply($event)" (click)="isReplying.set(false)"  [toggleable]="false" color="primary"><span class="font-medium">Send Email</span></outlined-button>
            </div>

        </div>
        <mat-divider *ngIf="isReplying()"></mat-divider>

        <div class="px-8">
            <p class="text-xl font-medium mt-4 mb-4">Email Subject</p>
            <p class="text-base">from: me</p>
            <p class="text-xs">9:00AM 11/14/2023</p>
            <p class="text-sm mt-2">
                Lorem ipsum dolor sit amet consectetur. Nibh nulla volutpat condimentum nullam sed. Urna elementum dui egestas at tempor. 
                Eget vitae nunc odio in. Sed pretium sit tellus libero blandit dignissim vitae neque quisque. 
                Scelerisque nulla leo nulla sagittis luctus sit quisque. Laoreet pharetra pretium nibh vestibulum. 
                Rutrum diam suspendisse massa morbi. Tellus bibendum mattis mattis velit sociis. Facilisi ut duis diam id. Non morbi amet enim metus. 
                Vel tortor potenti adipiscing velit. Velit gravida sit eget nullam pellentesque ullamcorper maecenas amet. 
                Ultricies non viverra nulla neque vel faucibus. Purus enim et massa tristique accumsan.
            </p>
            
            <div class="flex gap-2 mt-2 mb-4 ">

                <div 
                    class="flex gap-1 border border-solid rounded-lg border-gray-500 py-1 px-2 items-center  justify-between" >
                    <p class="text-sm dots font-medium">photo1.jpg</p>
                    <mat-icon class="text-base" style="width: auto;">close</mat-icon>
                </div>

                <div 
                    class="flex gap-1 border border-solid rounded-lg border-gray-500 py-1 px-2 items-center justify-between" >
                    <p class="text-sm dots font-medium">photo1.jpg</p>
                    <mat-icon class="text-base" style="width: auto;">close</mat-icon>
                </div>
            </div>
        </div>

        <mat-divider></mat-divider>

        <div class="px-8">
            <p class="text-xl font-medium mt-4 mb-4">Email Subject</p>
            <p class="text-base">from: m{{from}}</p>
            <p class="text-xs">9:00AM 11/14/2023</p>
            <p class="text-sm mt-2">
                Lorem ipsum dolor sit amet consectetur. Nibh nulla volutpat condimentum nullam sed. Urna elementum dui egestas at tempor. 
                Eget vitae nunc odio in. Sed pretium sit tellus libero blandit dignissim vitae neque quisque. 
                Scelerisque nulla leo nulla sagittis luctus sit quisque. Laoreet pharetra pretium nibh vestibulum. 
                Rutrum diam suspendisse massa morbi. Tellus bibendum mattis mattis velit sociis. Facilisi ut duis diam id. Non morbi amet enim metus. 
                Vel tortor potenti adipiscing velit. Velit gravida sit eget nullam pellentesque ullamcorper maecenas amet. 
                Ultricies non viverra nulla neque vel faucibus. Purus enim et massa tristique accumsan.
            </p>
            
            <div class="flex gap-2 mt-2 mb-4 ">

                <div 
                    class="flex gap-1 border border-solid rounded-lg border-gray-500 py-1 px-2 items-center  justify-between" >
                    <p class="text-sm dots font-medium">photo1.jpg</p>
                    <mat-icon class="text-base" style="width: auto;">close</mat-icon>
                </div>

                <div 
                    class="flex gap-1 border border-solid rounded-lg border-gray-500 py-1 px-2 items-center justify-between" >
                    <p class="text-sm dots font-medium">photo1.jpg</p>
                    <mat-icon class="text-base" style="width: auto;">close</mat-icon>
                </div>
            </div>
        </div>


    </div>
</app-panel-outlined>